<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Learn how to understand, speak, and do economics in the public sector">

<title>Microeconomics for Public Policy - Week 3 FAQs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="..//files/favicon-512.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta property="og:title" content="Microeconomics for Public Policy - Week 3 FAQs">
<meta property="og:description" content="">
<meta property="og:image" content="https://econs23.classes.andrewheiss.com/files/social-image-s23.png">
<meta property="og:site-name" content="Microeconomics for Public Policy">
<meta property="og:locale" content="en_US">
<meta property="og:image:height" content="640">
<meta property="og:image:width" content="1280">
<meta name="twitter:title" content="Microeconomics for Public Policy - Week 3 FAQs">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://econs23.classes.andrewheiss.com/files/social-image-s23.png">
<meta name="twitter:creator" content="@andrewheiss">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image-height" content="640">
<meta name="twitter:image-width" content="1280">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Microeconomics for Public Policy</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../syllabus.html" rel="" target="">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../schedule.html" rel="" target="">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../content/index.html" rel="" target="">
 <span class="menu-text">Classes and readings</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../assignment/index.html" rel="" target="">
 <span class="menu-text">Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../resource/index.html" rel="" target="">
 <span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../news/index.html" rel="" target="">
 <span class="menu-text">News</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://gsuecons2023.slack.com" rel="" target=""><i class="bi bi-slack" role="img" aria-label="Slack">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#weekly-check-ins-for-double-session-weeks" id="toc-weekly-check-ins-for-double-session-weeks" class="nav-link active" data-scroll-target="#weekly-check-ins-for-double-session-weeks">Weekly check-ins for double-session weeks</a></li>
  <li><a href="#utility" id="toc-utility" class="nav-link" data-scroll-target="#utility">Utility</a></li>
  <li><a href="#desmos" id="toc-desmos" class="nav-link" data-scroll-target="#desmos">Desmos</a></li>
  <li><a href="#disappearing-math-symbols" id="toc-disappearing-math-symbols" class="nav-link" data-scroll-target="#disappearing-math-symbols">Disappearing math symbols</a></li>
  <li><a href="#e-and-natural-logs" id="toc-e-and-natural-logs" class="nav-link" data-scroll-target="#e-and-natural-logs"><span class="math inline">\(e\)</span> and natural logs</a></li>
  <li><a href="#more-about-slopes-and-derivatives" id="toc-more-about-slopes-and-derivatives" class="nav-link" data-scroll-target="#more-about-slopes-and-derivatives">More about slopes and derivatives</a></li>
  <li><a href="#partial-derivatives-and-wolfram-alpha" id="toc-partial-derivatives-and-wolfram-alpha" class="nav-link" data-scroll-target="#partial-derivatives-and-wolfram-alpha">Partial derivatives and Wolfram Alpha</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<div class="back-nav"><a href="../news/">← News</a></div>

<header id="title-block-header" class="news quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Week 3 FAQs</h1>
  <div class="quarto-categories">
    <div class="quarto-category">FAQs</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Posted</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Wednesday June 28, 2023 at 3:05 PM</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>Hi everyone!</p>
<p>I just finished going through your problem sets and weekly reports and I’m still really happy with how much you all are learning! Great work everyone!</p>
<p>A few common questions/comments really quick for you based on your problem sets and weekly check-ins:</p>
<section id="weekly-check-ins-for-double-session-weeks" class="level3">
<h3 class="anchored" data-anchor-id="weekly-check-ins-for-double-session-weeks">Weekly check-ins for double-session weeks</h3>
<p>Sessions 5/6 (and 7/8 and 9/10) are doubled up, which slightly complicates the weekly check-ins. If you look at the instructions for these weekly check-ins (like <a href="../assignment/04-weekly-check-in.html">weekly check-in 4</a>), it says “we’re spending two sessions for this topic, so think of additional interesting and muddy things this week.”. So do that :)</p>
</section>
<section id="utility" class="level3">
<h3 class="anchored" data-anchor-id="utility">Utility</h3>
<blockquote class="blockquote">
<p>It was unclear who was best off with question 2 in problem set 3.</p>
</blockquote>
<p>Ha, yeah, that was a trick question. You can’t know who’s better off! With the waffle/bacon utility question, tons of you said that Ron Swanson was the best off because his utility score was higher than everyone else. But that’s not true! Utility is imaginary, and we all have different values and scales of utility in our head. If you really wanted to know who was better off, you’d need some sort of exchange rate calculation to compare Swanson’s, Gergich’s, and Knope’s utility scores. <strong>You can’t compare utility across people!</strong></p>
<blockquote class="blockquote">
<p>BUT in problem set 3, question 6, there are questions about which things individual people preferred? I thought utility is imaginary?</p>
</blockquote>
<p>Lots of you said that it is impossible to know which combination of pizza and yogurt would make Michael the happiest, since utility is imaginary. Comparing utility <em>across</em> individuals is indeed impossible, but comparing utility <em>within</em> a single person isn’t impossible or imaginary. We know his preferences—that’s what the utility function is for.</p>
<blockquote class="blockquote">
<p>Why can’t we compare utility across people? Everything is measured in utils, so can’t we compare those same values?</p>
</blockquote>
<p>You can’t measure utility because there’s no universal method for doing so. If you ask someone how many “happiness points” they get from eating ramen, they might say 10 or 2.3 or 1000. They can make utility comparisons for themselves—like, if they like spaghetti more than ramen, then maybe spaghetti gives them 50 points and ramen just 10. But they can’t compare utility with other people. I might get 80 utils from ramen, while someone else gets 10, but my 80 could be on a completely different scale as the other person’s 10.</p>
<p>Imagine that utils are like different currencies—dollars, pesos, euros, and yen are all ways of measuring prices, but you can’t say that $20 is better or worse than €20 unless you know the exchange rate. And there is no exchange rate for happiness points. <em>Within</em> a country, I know that $10 is more than $5, but without an exchange rate, I have no idea if $10 is better than €20 is better than £5 etc.</p>
</section>
<section id="desmos" class="level3">
<h3 class="anchored" data-anchor-id="desmos">Desmos</h3>
<blockquote class="blockquote">
<p>Plotting production possibility curves with Excel is hard.</p>
</blockquote>
<p>Yep! Don’t do it! Do it by hand and take a picture, or use a drawing app on your computer. This will be important when we get to supply and demand graphs later in the semester too. One fun thing about economics is that you don’t need to be super exact with graphs. By-hand back-of-the-envelope graphs are fine for lots of things.</p>
<blockquote class="blockquote">
<p>I plotted something in Desmos and it didn’t show up?!</p>
</blockquote>
<p>Most of the time when you plot something in Desmos and it doesn’t show up, it’s because of zooming. In problem set 4, you’ll plot <code>y = -2x + 30</code>. When you type that in Desmos initially, you won’t see anything because by default Desmos only shows from −10 to 10 on both the x and y axes.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/desmos-no-graph.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption class="figure-caption">No graph in Desmos!</figcaption>
</figure>
</div>
<p>Zoom out and you’ll see it.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/desmos-zoom-out.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption class="figure-caption">Visible graph after zooming out</figcaption>
</figure>
</div>
<p>You’ll run into similar problems with a couple questions on problem set 5—it will look like two lines are parallel, when really they’re not because they cross way out at like x = 2000ish (but where y = 3ish, so it’ll look really flat still—you can use the plot settings in Desmos to control axes independently, so you might want to have the y axis go from 0 to 5 and the x axis go from 0 to 4000 or something)</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/desmos-settings.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption class="figure-caption">Plot settings in Desmos</figcaption>
</figure>
</div>
</section>
<section id="disappearing-math-symbols" class="level3">
<h3 class="anchored" data-anchor-id="disappearing-math-symbols">Disappearing math symbols</h3>
<p>Lots of the problem sets will have math symbols that Word can’t really handle very well. Most economics problem sets (and the answer keys for this class) are actually written in a <a href="https://datavizs23.classes.andrewheiss.com/resource/markdown.html#math">weird mathematical typesetting language named LaTeX because of the math notation</a>; the fancy math that shows up on the course website is an HTML version of LaTeX formulas. So if you copy/paste questions into Word, be aware that not all symbols will necessarily transfer over correctly (like square roots, exponents, subscripts, and other things).</p>
</section>
<section id="e-and-natural-logs" class="level3">
<h3 class="anchored" data-anchor-id="e-and-natural-logs"><span class="math inline">\(e\)</span> and natural logs</h3>
<blockquote class="blockquote">
<p>What the heck are <span class="math inline">\(e\)</span> and ln() really? These formulas look like magic spell incantations.</p>
</blockquote>
<p>This is true. Logarithms (especially natural logarithms) are weird. The number <span class="math inline">\(e\)</span> deals with growth over time, and the natural log (ln) reverses that. You should check out these quick extra resources to learn more about what <span class="math inline">\(e\)</span> and ln are:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=AuA2EAgAegE">Numberphile, “e (Euler’s Number)”</a></li>
<li><a href="https://betterexplained.com/articles/an-intuitive-guide-to-exponential-functions-e/">“An intuitive guide to exponential functions and e”</a></li>
<li><a href="https://betterexplained.com/articles/demystifying-the-natural-logarithm-ln/">“Demystifying the natural logarithm (ln)”</a></li>
</ul>
</section>
<section id="more-about-slopes-and-derivatives" class="level3">
<h3 class="anchored" data-anchor-id="more-about-slopes-and-derivatives">More about slopes and derivatives</h3>
<p>If you want a little bit more detail about slopes and derivatives (including some more basic plots and animations!), <a href="https://www.andrewheiss.com/blog/2022/05/20/marginalia/#what-does-marginal-even-mean-in-the-first-place">check out the ‘What does “marginal” even mean in the first place?’ section of this blog post</a>. You can safely ignore the rest of the post—it’s written for stats purposes, but the basic overview of derivatives and slopes should be helpful (and there’s a <a href="https://www.andrewheiss.com/blog/2022/05/20/marginalia/#marginal-things-in-economics">section on “marginal things in economics”</a> that is applicable).</p>
</section>
<section id="partial-derivatives-and-wolfram-alpha" class="level3">
<h3 class="anchored" data-anchor-id="partial-derivatives-and-wolfram-alpha">Partial derivatives and Wolfram Alpha</h3>
<p>In question 6 on problem set 3, the utility function was <span class="math inline">\(U = \sqrt{xy}\)</span>,and I told you that the derivative was <span class="math inline">\(\frac{y}{x}\)</span>. In the example for utility maximization, the utility function was <span class="math inline">\(U = xy\)</span> and the derivative was also <span class="math inline">\(\frac{y}{x}\)</span>. What gives? These two different utility functions have the same slope? Yep.</p>
<p>Additionally, if you type <a href="https://www.wolframalpha.com/input?i=derivative+sqrt%28xy%29"><code>derivative sqrt(xy)</code> into Wolfram Alpha</a>, you won’t get <span class="math inline">\(\frac{y}{x}\)</span>—you’ll get something completely different:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/wolfram-alpha-partial-derivatives.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption class="figure-caption">Wolfram Alpha partial derivatives</figcaption>
</figure>
</div>
<p>That does actually show you the correct derivative, but because there are multiple variables (<span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>), you need to do a little extra manual work. Derivatives are slopes, but when you’re working with two different variables, the slope depends on the two different values of <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>.</p>
<p>For instance, the slope of this curve (<span class="math inline">\(10 = \sqrt{xy}\)</span>) is really steep and negative when <span class="math inline">\(x\)</span> values are low and <span class="math inline">\(y\)</span> values are high; the slope is really shallow and negative when x values are high and <span class="math inline">\(y\)</span> values are low:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/sqrt-x-y-desmos.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption class="figure-caption"><span class="math inline">\(\sqrt{xy} = 10\)</span> in Desmos</figcaption>
</figure>
</div>
<p>The slope of the overall line is a combination of the partial derivatives for <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>, or the slope of the line when <span class="math inline">\(y\)</span> is held to a single value (the <span class="math inline">\(x\)</span> part of the slope, or <span class="math inline">\(\partial x\)</span>) and the slope of the line when <span class="math inline">\(x\)</span> is held to a single value (the <span class="math inline">\(y\)</span> part of the slope, or <span class="math inline">\(\partial y\)</span>)</p>
<p><span class="math display">\[
\frac{\partial / \partial x}{\partial / \partial y}
\]</span></p>
<p>(That means “the partial derivative of the x part” divided by “the partial derivative of the y part”)</p>
<p>This is what Wolfram Alpha shows you—the two partial derivatives:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/wolfram-alpha-partial-derivatives.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption class="figure-caption">Wolfram Alpha partial derivatives</figcaption>
</figure>
</div>
<p>If you divide those two parts, the <span class="math inline">\(x\)</span>-based partial derivative over the <span class="math inline">\(y\)</span>-based partial derivative, you get this:</p>
<p><span class="math display">\[
\frac
{\displaystyle \quad \frac{y}{2 \sqrt{xy}} \quad}
{\displaystyle \quad \frac{x}{2 \sqrt{xy}} \quad}
\]</span></p>
<p>Those gross <span class="math inline">\(2 \sqrt{xy}\)</span> things disappear because of how dividing fractions works (multiply by the inverse):</p>
<p><span class="math display">\[
\require{cancel}
\frac{y}{2 \sqrt{xy}} \times \frac{2 \sqrt{xy}}{x}\quad=\quad \frac{y}{\xcancel{2 \sqrt{xy}}} \times \frac{\xcancel{2 \sqrt{xy}}}{x}  \quad = \quad \frac{y}{x}
\]</span></p>
<p><em>That’s</em> where the <span class="math inline">\(\frac{y}{x}\)</span> derivative comes from.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Content <i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i> 2023 by <a href="https://www.andrewheiss.com">Andrew Heiss</a> <br> All content licensed under a <i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i> <i class="fa-brands fa-creative-commons-by" aria-label="creative-commons-by"></i> <i class="fa-brands fa-creative-commons-nc" aria-label="creative-commons-nc"></i> <a href="https://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International license (CC BY-NC 4.0)</a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Made with <i class="fa-brands fa-r-project" aria-label="r-project"></i> and <a href="https://quarto.org/">Quarto</a><br> <a href="https://www.github.com/andrewheiss/econs23.classes.andrewheiss.com">View the source at <i class="fa-brands fa-github" aria-label="github"></i> GitHub</a></div>
  </div>
</footer>



</body></html>