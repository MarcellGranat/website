<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="Learn how to analyse, understand, and communicate about your data!">
<title>Big Data &amp; Data Visualisation - Web scraping</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="..//files/favicon-512.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta property="og:title" content="Big Data &amp; Data Visualisation - Web scraping">
<meta property="og:description" content="">
<meta property="og:image" content="https://marcellgranat.com/bigdata/files/social-image-s23.png">
<meta property="og:site-name" content="Big Data &amp; Data Visualisation">
<meta property="og:locale" content="en_US">
</head>
<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Big Data &amp; Data Visualisation</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="../syllabus.html" rel="" target="">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../content/index.html" rel="" target="" aria-current="page">
 <span class="menu-text">Classes and readings</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../assignment.html" rel="" target="">
 <span class="menu-text">Assignments</span></a>
  </li>  
</ul>
<div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../content/12-content.html">Web scraping</a></li><li class="breadcrumb-item"><a href="../content/12-content.html">Web scraping</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto"><div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Overview</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Readings, lectures, and videos</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Introduction to R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/01-content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The base R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/02-content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistics in R</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Data manipulation I</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/03-content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to manipulation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/04-content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">A whole game</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Data manipulation II</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/05-content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regex</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/06-content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Functional programming</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/07-content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">A whole game</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Regression, classification</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/08-content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Slides</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Data Visualisation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/09-content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to ggplot2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/10-content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Advanced ggplot2</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">Casual Inference</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/11-content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Casual Inference</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
 <span class="menu-text">Web scraping</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/12-content.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Web scraping</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
 <span class="menu-text">Clustering, Dimension Reduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/13-content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Clustering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/14-content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PCA</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
 <span class="menu-text">ML</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/15-content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Algorithmic Modeling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/16-content.qmd" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tidy modeling</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#naviagtion-on-the-page" id="toc-naviagtion-on-the-page" class="nav-link active" data-scroll-target="#naviagtion-on-the-page">Naviagtion on the page</a></li>
  <li><a href="#find-the-link" id="toc-find-the-link" class="nav-link" data-scroll-target="#find-the-link">Find the link</a></li>
  <li><a href="#data-from-tables" id="toc-data-from-tables" class="nav-link" data-scroll-target="#data-from-tables">Data from tables</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header"><h1 class="title display-7">Web scraping</h1>

<div class="date-block bg-class text-white p-2">
  <p class="date">Readings and class materials for Tuesday, October 31, 2023</p>
</div>
</header><p>Nowadays, we manage a very huge part of our life online. This has an important side-effect: we can collect enormous data from the web for our researches. You can access data about shops, blogs, social media etc. The target of this chapter is to give a brief introduction how you can collect this data effectively. We will need a new package for this purpose: <a href="https://rvest.tidyverse.org/">rvest</a></p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rvest.tidyverse.org/">rvest</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We will scrape the data from <a href="https://www.hasznaltauto.hu/">hasznaltauto</a>, which is the online second hand car market of Hungary. Lets navigate to the page in our browser and lets click on search.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/hasznaltauto.jpg" class="img-fluid figure-img" width="856"></p>
<figcaption class="figure-caption">www.hasznaltauto.hu/</figcaption></figure>
</div>
</div>
</div>
<p>Now we have to copy and paste the new url from the browser to Rstudio. This will be the first link we want to visit while scraping. Lets assign this url as <code>url</code> in R.</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">url</span> <span class="op">&lt;-</span> <span class="st">"https://www.hasznaltauto.hu/talalatilista/PCOG2VGRR3RDAD [...]"</span> <span class="co"># long url</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/hasz_frist_click.gif" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Click on the search button.</figcaption></figure>
</div>
</div>
</div>
<p>The next step is load the website into your R session. This can be done by the <code>read_html</code> function from the <a href="https://rvest.tidyverse.org/">rvest</a> package.</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">page</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://xml2.r-lib.org/reference/read_xml.html">read_html</a></span><span class="op">(</span><span class="va">url</span><span class="op">)</span></span>
<span></span>
<span><span class="va">page</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{html_document}
&lt;html lang="hu-HU"&gt;
[1] &lt;head&gt;\n&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8 ...
[2] &lt;body&gt;\n    &lt;script type="text/javascript"&gt;window.dataLayer = window.data ...</code></pre>
</div>
</div>
<section id="naviagtion-on-the-page" class="level2"><h2 class="anchored" data-anchor-id="naviagtion-on-the-page">Naviagtion on the page</h2>
<p>Now we can see the webpage as html codes in RStudio. This is the same what you get if you open developer view in your browser.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/dev_mode.jpg" class="img-fluid figure-img" width="960"></p>
<figcaption class="figure-caption">Developer view in browser.</figcaption></figure>
</div>
</div>
</div>
<p>In the developer view, you can find the information that is relevant to you and select it using the <code>html_nodes</code> function. Alternatively, however, there is a simpler method. Add <strong>Selector Gadget</strong> to your browser. This add-on helps you find the ID of an item by clicking on it. This way, you can navigate without having web development skills. We can easily install this add-on in chrome and edge, just search for its name and the first hit should be this.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/selector_gadget_to_chrome.jpg" class="img-fluid figure-img" width="616"></p>
<figcaption class="figure-caption">Add Selector Gadget to your browser.</figcaption></figure>
</div>
</div>
</div>
<p>You can activate the add-on from the menu of your browser.</p>
<p>First, find the IDs for the car ads. To do this, first select the name of a specific car and then mark everything you do not want to include. The target is to make every car ads title to yellow or green, but nothing else should be green.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/selector_gadget_to_use.gif" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Using Selector Gadget to find IDs for the car ads.</figcaption></figure>
</div>
</div>
</div>
<p>If you have the ID you are looking for, put it in the <code>html_nodes</code> function. The code above selects the ad titles from the page.</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">my_node</span> <span class="op">&lt;-</span> <span class="va">page</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rvest.tidyverse.org/reference/rename.html">html_nodes</a></span><span class="op">(</span><span class="st">".cim-kontener a"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_node</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{xml_nodeset (130)}
 [1] &lt;a class="btn hagomb hagomb-nagy parkoloBtn parkolo-nolabel" data-hirkod ...
 [2] &lt;a class="" href="https://www.hasznaltauto.hu/szemelyauto/suzuki/vitara/ ...
 [3] &lt;a class="" href="https://www.hasznaltauto.hu/szemelyauto/suzuki/vitara/ ...
 [4] &lt;a class="btn hagomb hagomb-nagy parkoloBtn parkolo-nolabel" data-hirkod ...
 [5] &lt;a class="" href="https://www.hasznaltauto.hu/szemelyauto/opel/astra_l/o ...
 [6] &lt;a class="" href="https://www.hasznaltauto.hu/szemelyauto/opel/astra_l/o ...
 [7] &lt;a class="btn hagomb hagomb-nagy parkoloBtn parkolo-nolabel" data-hirkod ...
 [8] &lt;a class="" href="https://www.hasznaltauto.hu/szemelyauto/nissan/x-trail ...
 [9] &lt;a class="" href="https://www.hasznaltauto.hu/szemelyauto/nissan/x-trail ...
[10] &lt;a class="btn hagomb hagomb-nagy parkoloBtn parkolo-nolabel" data-hirkod ...
[11] &lt;a class="" href="https://www.hasznaltauto.hu/szemelyauto/nissan/qashqai ...
[12] &lt;a class="" href="https://www.hasznaltauto.hu/szemelyauto/nissan/qashqai ...
[13] &lt;a class="btn hagomb hagomb-nagy parkoloBtn parkolo-nolabel" data-hirkod ...
[14] &lt;a class="" href="https://www.hasznaltauto.hu/szemelyauto/suzuki/s-cross ...
[15] &lt;a class="" href="https://www.hasznaltauto.hu/szemelyauto/suzuki/s-cross ...
[16] &lt;a class="btn hagomb hagomb-nagy parkoloBtn parkolo-nolabel" data-hirkod ...
[17] &lt;a class="" href="https://www.hasznaltauto.hu/szemelyauto/peugeot/5008/p ...
[18] &lt;a class="" href="https://www.hasznaltauto.hu/szemelyauto/peugeot/5008/p ...
[19] &lt;a class="btn hagomb hagomb-nagy parkoloBtn parkolo-nolabel" data-hirkod ...
[20] &lt;a class="" href="https://www.hasznaltauto.hu/szemelyauto/peugeot/3008/p ...
...</code></pre>
</div>
</div>
<p>But this is still an html_code.If we want to keep the text of the element, we use the <code>html_text</code> function, but if we are interested in the url it points to, we use the<code>html_attr</code> function. In the latter case, it is always necessary to specify the <code>href</code> element, ie which web page you are referring to.</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">name_of_the_car</span> <span class="op">&lt;-</span> <span class="va">my_node</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rvest.tidyverse.org/reference/html_text.html">html_text</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">name_of_the_car</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "P"                                                                                                                                       
  [2] "SUZUKI VITARA 1.4 Hybrid GL+ akár: 2.1 millió ár-előny+0% THM!"                                                                          
  [3] "SUZUKI VITARA 1.4 Hybrid GL+ akár: 2.1 millió ár-előny+0% THM!"                                                                          
  [4] "P"                                                                                                                                       
  [5] "OPEL ASTRA L 1.2 T Business Edition"                                                                                                     
  [6] "OPEL ASTRA L 1.2 T Business Edition"                                                                                                     
  [7] "P"                                                                                                                                       
  [8] "NISSAN X-TRAIL 1.5 VC-T Mild Hybrid Xtronic Acenta FIX 0%THM !"                                                                          
  [9] "NISSAN X-TRAIL 1.5 VC-T Mild Hybrid Xtronic Acenta FIX 0%THM !"                                                                          
 [10] "P"                                                                                                                                       
 [11] "NISSAN QASHQAI 1.3 DIG-T Mild Hybrid Tekna X-Tronic FIX 0%THM ! Készletről!"                                                             
 [12] "NISSAN QASHQAI 1.3 DIG-T Mild Hybrid Tekna X-Tronic FIX 0%THM ! Készletről!"                                                             
 [13] "P"                                                                                                                                       
 [14] "SUZUKI S-CROSS 1.4 Hybrid GL+ akár: 2.1 milliós árelőny + 0% THM!"                                                                       
 [15] "SUZUKI S-CROSS 1.4 Hybrid GL+ akár: 2.1 milliós árelőny + 0% THM!"                                                                       
 [16] "P"                                                                                                                                       
 [17] "PEUGEOT 5008 1.2 PureTech Active Pack (7 személyes ) AZONNAL ELVIHETŐ! ÉV VÉGÉIG AKCIÓS 3.3% THM-MEL!"                                   
 [18] "PEUGEOT 5008 1.2 PureTech Active Pack (7 személyes ) AZONNAL ELVIHETŐ! ÉV VÉGÉIG AKCIÓS 3.3% THM-MEL!"                                   
 [19] "P"                                                                                                                                       
 [20] "PEUGEOT 3008 1.2 PureTech Active Pack"                                                                                                   
 [21] "PEUGEOT 3008 1.2 PureTech Active Pack"                                                                                                   
 [22] "P"                                                                                                                                       
 [23] "MAZDA 6 Sportkombi G194 20th Anniversary - KÉSZLETEN"                                                                                    
 [24] "MAZDA 6 Sportkombi G194 20th Anniversary - KÉSZLETEN"                                                                                    
 [25] "P"                                                                                                                                       
 [26] "OPEL GRANDLAND 1.5 CDTI Business Edition (Automata) hamarosan megérkezik"                                                                
 [27] "OPEL GRANDLAND 1.5 CDTI Business Edition (Automata) hamarosan megérkezik"                                                                
 [28] "P"                                                                                                                                       
 [29] "KIA SORENTO 1.6 T-GDI PHEV Platinum 4WD (Automata) PLUG IN HYBRID! ÖSSZKERÉK! TÖBB SZÍNBEN AZONNAL!"                                     
 [30] "KIA SORENTO 1.6 T-GDI PHEV Platinum 4WD (Automata) PLUG IN HYBRID! ÖSSZKERÉK! TÖBB SZÍNBEN AZONNAL!"                                     
 [31] "P"                                                                                                                                       
 [32] "PEUGEOT 308 SW 1.6 PureTech PHEV GT EAT8 AZONNAL ELVIHETŐ!"                                                                              
 [33] "PEUGEOT 308 SW 1.6 PureTech PHEV GT EAT8 AZONNAL ELVIHETŐ!"                                                                              
 [34] "P"                                                                                                                                       
 [35] "PEUGEOT 208 1.2 PureTech Active Pack EAT8"                                                                                               
 [36] "PEUGEOT 208 1.2 PureTech Active Pack EAT8"                                                                                               
 [37] "P"                                                                                                                                       
 [38] "PEUGEOT RIFTER e-Rifter 50kWh Active Pack KIZÁRÓLAG GYÁRTÁSRENDELÉSBŐL!"                                                                 
 [39] "PEUGEOT RIFTER e-Rifter 50kWh Active Pack KIZÁRÓLAG GYÁRTÁSRENDELÉSBŐL!"                                                                 
 [40] "P"                                                                                                                                       
 [41] "SSANGYONG REXTON 2.2 e-XDI Premium 4WD (Automata) (7 személyes ) TESZTAUTÓ!"                                                             
 [42] "SSANGYONG REXTON 2.2 e-XDI Premium 4WD (Automata) (7 személyes ) TESZTAUTÓ!"                                                             
 [43] "P"                                                                                                                                       
 [44] "OPEL CORSA F 1.2 Edition Akciós modell kimagasló kedvezménnyel!!!"                                                                       
 [45] "OPEL CORSA F 1.2 Edition Akciós modell kimagasló kedvezménnyel!!!"                                                                       
 [46] "P"                                                                                                                                       
 [47] "KIA CEE'D Ceed 1.0 T-GDI Silver Magyar. Szervizkönyv. Kamera. Áfás"                                                                      
 [48] "KIA CEE'D Ceed 1.0 T-GDI Silver Magyar. Szervizkönyv. Kamera. Áfás"                                                                      
 [49] "P"                                                                                                                                       
 [50] "OPEL CROSSLAND 1.2 T Edition Kiemelt akciós modell !!!"                                                                                  
 [51] "OPEL CROSSLAND 1.2 T Edition Kiemelt akciós modell !!!"                                                                                  
 [52] "P"                                                                                                                                       
 [53] "SSANGYONG KORANDO 1.5 Turbo GDI Clever KÜLÖNBÖZŐ FELSZERELTSÉGEK SZINEK AZONNAL RAKTÁRRÓL!"                                              
 [54] "SSANGYONG KORANDO 1.5 Turbo GDI Clever KÜLÖNBÖZŐ FELSZERELTSÉGEK SZINEK AZONNAL RAKTÁRRÓL!"                                              
 [55] "P"                                                                                                                                       
 [56] "HYUNDAI TUCSON 1.6 T-GDI hybrid Executive Plus (Automata) Készletről azonnal! 230LE Hybrid!"                                             
 [57] "HYUNDAI TUCSON 1.6 T-GDI hybrid Executive Plus (Automata) Készletről azonnal! 230LE Hybrid!"                                             
 [58] "P"                                                                                                                                       
 [59] "MERCEDES-BENZ C 220 T CDI BlueEFFICIENCY Avantgarde AMG LINE!!!HARMANKARDON!!GYÖNYÖRŰ ÁLLAPOT!!"                                         
 [60] "MERCEDES-BENZ C 220 T CDI BlueEFFICIENCY Avantgarde AMG LINE!!!HARMANKARDON!!GYÖNYÖRŰ ÁLLAPOT!!"                                         
 [61] "P"                                                                                                                                       
 [62] "OPEL MOKKA 1.2 T Edition Kiemelt akciós modell utolérhetetlen áron!!!Egyedi lízingakció!!!"                                              
 [63] "OPEL MOKKA 1.2 T Edition Kiemelt akciós modell utolérhetetlen áron!!!Egyedi lízingakció!!!"                                              
 [64] "P"                                                                                                                                       
 [65] "PEUGEOT 408 1.2 PureTech Allure Pack EAT8 TESZTAUTÓ! 2024 FEBRUÁRI ÁTVÉTELLEL!"                                                          
 [66] "PEUGEOT 408 1.2 PureTech Allure Pack EAT8 TESZTAUTÓ! 2024 FEBRUÁRI ÁTVÉTELLEL!"                                                          
 [67] "P"                                                                                                                                       
 [68] "SSANGYONG TIVOLI 1.5 GDi-T Style ÚJ FORMA. BEVÁLT TARTALOM RENDELJE MEG NÁLUNK AZ ÚJ TIVOLIT!"                                           
 [69] "SSANGYONG TIVOLI 1.5 GDi-T Style ÚJ FORMA. BEVÁLT TARTALOM RENDELJE MEG NÁLUNK AZ ÚJ TIVOLIT!"                                           
 [70] "P"                                                                                                                                       
 [71] "SSANGYONG TORRES 1.5 Turbo GDI Club MEGÉRKEZETT AZ ÚJ TORRES PRÓBÁLJA KI ÉS RENDELJE MEG NÁLUNK!"                                        
 [72] "SSANGYONG TORRES 1.5 Turbo GDI Club MEGÉRKEZETT AZ ÚJ TORRES PRÓBÁLJA KI ÉS RENDELJE MEG NÁLUNK!"                                        
 [73] "P"                                                                                                                                       
 [74] "AUDI A6 ALLROAD 55 TFSI quattro S-tronic EGYEDI SZÍN. BANG&amp;OLUFSEN HIFI !!"                                                              
 [75] "AUDI A6 ALLROAD 55 TFSI quattro S-tronic EGYEDI SZÍN. BANG&amp;OLUFSEN HIFI !!"                                                              
 [76] "P"                                                                                                                                       
 [77] "MAZDA CX-5 2.5i e-Skyactiv Homura AWD (Automata) NAVI! Márkakereskedésből!"                                                              
 [78] "MAZDA CX-5 2.5i e-Skyactiv Homura AWD (Automata) NAVI! Márkakereskedésből!"                                                              
 [79] "P"                                                                                                                                       
 [80] "KIA NIRO 1.6 GDI HEV Silver DCT"                                                                                                         
 [81] "KIA NIRO 1.6 GDI HEV Silver DCT"                                                                                                         
 [82] "P"                                                                                                                                       
 [83] "KIA XCEED 1.5 T-GDI X-Gold Készletről egyedi kedvezménnyel!"                                                                             
 [84] "KIA XCEED 1.5 T-GDI X-Gold Készletről egyedi kedvezménnyel!"                                                                             
 [85] "P"                                                                                                                                       
 [86] "SKODA SUPERB 2.0 TDI SCR Style 4x4 DSG Magyarországi!1.tul.!Végig vezetett szervizkönyv!"                                                
 [87] "SKODA SUPERB 2.0 TDI SCR Style 4x4 DSG Magyarországi!1.tul.!Végig vezetett szervizkönyv!"                                                
 [88] "P"                                                                                                                                       
 [89] "SKODA OCTAVIA 2.0 CR TDI Elegance Magyarországi!Kitűnő műszaki állapot!Vezetett szervízkönyv!"                                           
 [90] "SKODA OCTAVIA 2.0 CR TDI Elegance Magyarországi!Kitűnő műszaki állapot!Vezetett szervízkönyv!"                                           
 [91] "P"                                                                                                                                       
 [92] "MERCEDES-BENZ C 160 LED Fényszórók / AGILITY CONTROL futómű / Tolatókamera"                                                              
 [93] "P"                                                                                                                                       
 [94] "MERCEDES-BENZ CLA 200 Progressive 7G-DCT Magyarországi ISP"                                                                              
 [95] "P"                                                                                                                                       
 [96] "MERCEDES-BENZ C 180 9G-TRONIC Mild hybrid drive Újszerű. ÁFÁ-s! 9.99%THM"                                                                
 [97] "P"                                                                                                                                       
 [98] "MERCEDES-BENZ GLC 250 d 4Matic 9G-TRONIC 1.tulajd. vezetett szervizk! 9.99%THM"                                                          
 [99] "P"                                                                                                                                       
[100] "BMW X4 xDrive20d (Automata) Adaptív LED.Msport futómű.Akár 2év Garanciával!"                                                             
[101] "P"                                                                                                                                       
[102] "MERCEDES-BENZ A 180 d AMG Line 8G-DCT Mo.-i. Garanciális. ISP 2026.05.-ig. AMG Line. Panoráma tető"                                      
[103] "P"                                                                                                                                       
[104] "BMW 730d xDrive (Automata) Laser világítás.BowersWilkinson.HeadUPDisplay.Panoráma tető.akár 2 év Garanciáva"                             
[105] "P"                                                                                                                                       
[106] "MERCEDES-AMG A-OSZTÁLY AMG A 35 Magyar!"                                                                                                 
[107] "P"                                                                                                                                       
[108] "BMW 330e M Sport (Automata)"                                                                                                             
[109] "P"                                                                                                                                       
[110] "MERCEDES-BENZ EQA 250 Gyönyörű állapot. Gyári garancia 9.99%THM"                                                                         
[111] "P"                                                                                                                                       
[112] "MERCEDES-BENZ GLA 200 d Progressive Line 8G-DCT ÁFÁ-s / Hosszútávú bérleti lehetőség / Kedvező finanszírozási opciók!"                   
[113] "P"                                                                                                                                       
[114] "MERCEDES-BENZ S 560 4Matic 9G-TRONIC / Áfás / Garanciális / Sérülésmentes / Állófűtés / Iwc Schaffhausen analóg óra"                     
[115] "P"                                                                                                                                       
[116] "MERCEDES-BENZ GLC 300 de 4Matic 9G-TRONIC Plug-in hybrid ÁFÁ-S/Hosszútávú bérleti lehetőség!/Kedvező EUR alapú finanszírozási lehetőség!"
[117] "P"                                                                                                                                       
[118] "MERCEDES-BENZ GLC 300 de 4Matic 9G-TRONIC Plug-in hybrid ÁFÁ-s/ Hosszútávú bérleti lehetőség/ Kedvező finanszírozási opciók!"            
[119] "P"                                                                                                                                       
[120] "MERCEDES-BENZ GLE 350 de 4Matic 9G-TRONIC Plug-in hybrid 1.tulajd. vezetett szervizk. 9.99%THM!"                                         
[121] "P"                                                                                                                                       
[122] "MERCEDES-BENZ GLE 400 d 4Matic 9G-TRONIC ÁFÁ-s/ Garanciális. Integrált szerviz-csomag: 2026.12.hó-ig!"                                   
[123] "P"                                                                                                                                       
[124] "MERCEDES-BENZ S 400 d L 4Matic 9G-TRONIC Nettó ár: 42 511 811 Ft"                                                                        
[125] "P"                                                                                                                                       
[126] "OPEL CORSA F 1.2 BEST Magyarországon elsőnek forgalomba helyezett! Garanciális gépjármű"                                                 
[127] "P"                                                                                                                                       
[128] "SKODA OCTAVIA 1.0 TSI Ambition MAGYARORSZÁGI. 87694 KM. FÉNYEZÉSMENTES KAROSSZÉRIA. 3 ÉV GARANCIA!"                                      
[129] "P"                                                                                                                                       
[130] "HYUNDAI I30 1.6 T-GDi VEZETETT SZERVIZKÖNYV - PANORÁMATETŐ - 186LE - FŰTHETŐ KORMÁNY - 3 ÉV GARANCIA!"                                   </code></pre>
</div>
</div>
</section><section id="find-the-link" class="level2"><h2 class="anchored" data-anchor-id="find-the-link">Find the link</h2>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">url_to_car</span> <span class="op">&lt;-</span> <span class="va">my_node</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rvest.tidyverse.org/reference/html_attr.html">html_attr</a></span><span class="op">(</span><span class="st">"href"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">url_to_car</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] NA                                                                                                                                                                                                                                                      
  [2] "https://www.hasznaltauto.hu/szemelyauto/suzuki/vitara/suzuki_vitara_1.4_hybrid_gl_plusz_akar_2.1_millio_ar-elony_plusz_0_thm-18561661#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                        
  [3] "https://www.hasznaltauto.hu/szemelyauto/suzuki/vitara/suzuki_vitara_1.4_hybrid_gl_plusz_akar_2.1_millio_ar-elony_plusz_0_thm-18561661#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                        
  [4] NA                                                                                                                                                                                                                                                      
  [5] "https://www.hasznaltauto.hu/szemelyauto/opel/astra_l/opel_astra_l_1.2_t_business_edition-18643458#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                                            
  [6] "https://www.hasznaltauto.hu/szemelyauto/opel/astra_l/opel_astra_l_1.2_t_business_edition-18643458#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                                            
  [7] NA                                                                                                                                                                                                                                                      
  [8] "https://www.hasznaltauto.hu/szemelyauto/nissan/x-trail/nissan_x-trail_1.5_vc-t_mild_hybrid_xtronic_acenta_fix_0thm-18677911#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                  
  [9] "https://www.hasznaltauto.hu/szemelyauto/nissan/x-trail/nissan_x-trail_1.5_vc-t_mild_hybrid_xtronic_acenta_fix_0thm-18677911#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                  
 [10] NA                                                                                                                                                                                                                                                      
 [11] "https://www.hasznaltauto.hu/szemelyauto/nissan/qashqai/nissan_qashqai_1.3_dig-t_mild_hybrid_tekna_x-tronic_fix_0thm_keszletrol-18813851#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                      
 [12] "https://www.hasznaltauto.hu/szemelyauto/nissan/qashqai/nissan_qashqai_1.3_dig-t_mild_hybrid_tekna_x-tronic_fix_0thm_keszletrol-18813851#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                      
 [13] NA                                                                                                                                                                                                                                                      
 [14] "https://www.hasznaltauto.hu/szemelyauto/suzuki/s-cross/suzuki_s-cross_1.4_hybrid_gl_plusz_akar_2.1_millios_arelony_plusz_0_thm-19002890#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                      
 [15] "https://www.hasznaltauto.hu/szemelyauto/suzuki/s-cross/suzuki_s-cross_1.4_hybrid_gl_plusz_akar_2.1_millios_arelony_plusz_0_thm-19002890#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                      
 [16] NA                                                                                                                                                                                                                                                      
 [17] "https://www.hasznaltauto.hu/szemelyauto/peugeot/5008/peugeot_5008_1.2_puretech_active_pack_7_szemelyes_azonnal_elviheto_ev_vegeig_akcios_3.3_thm-mel-19047130#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                
 [18] "https://www.hasznaltauto.hu/szemelyauto/peugeot/5008/peugeot_5008_1.2_puretech_active_pack_7_szemelyes_azonnal_elviheto_ev_vegeig_akcios_3.3_thm-mel-19047130#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                
 [19] NA                                                                                                                                                                                                                                                      
 [20] "https://www.hasznaltauto.hu/szemelyauto/peugeot/3008/peugeot_3008_1.2_puretech_active_pack-19070070#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                                          
 [21] "https://www.hasznaltauto.hu/szemelyauto/peugeot/3008/peugeot_3008_1.2_puretech_active_pack-19070070#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                                          
 [22] NA                                                                                                                                                                                                                                                      
 [23] "https://www.hasznaltauto.hu/szemelyauto/mazda/6/mazda_6_sportkombi_g194_20th_anniversary_-_keszleten-19159548#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                                
 [24] "https://www.hasznaltauto.hu/szemelyauto/mazda/6/mazda_6_sportkombi_g194_20th_anniversary_-_keszleten-19159548#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                                
 [25] NA                                                                                                                                                                                                                                                      
 [26] "https://www.hasznaltauto.hu/szemelyauto/opel/grandland/opel_grandland_1.5_cdti_business_edition_automata_hamarosan_megerkezik-19194133#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                       
 [27] "https://www.hasznaltauto.hu/szemelyauto/opel/grandland/opel_grandland_1.5_cdti_business_edition_automata_hamarosan_megerkezik-19194133#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                       
 [28] NA                                                                                                                                                                                                                                                      
 [29] "https://www.hasznaltauto.hu/szemelyauto/kia/sorento/kia_sorento_1.6_t-gdi_phev_platinum_4wd_automata_plug_in_hybrid_osszkerek_tobb_szinben_azonnal-19310379#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                  
 [30] "https://www.hasznaltauto.hu/szemelyauto/kia/sorento/kia_sorento_1.6_t-gdi_phev_platinum_4wd_automata_plug_in_hybrid_osszkerek_tobb_szinben_azonnal-19310379#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                  
 [31] NA                                                                                                                                                                                                                                                      
 [32] "https://www.hasznaltauto.hu/szemelyauto/peugeot/308/peugeot_308_sw_1.6_puretech_phev_gt_eat8_azonnal_elviheto-19354937#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                       
 [33] "https://www.hasznaltauto.hu/szemelyauto/peugeot/308/peugeot_308_sw_1.6_puretech_phev_gt_eat8_azonnal_elviheto-19354937#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                       
 [34] NA                                                                                                                                                                                                                                                      
 [35] "https://www.hasznaltauto.hu/szemelyauto/peugeot/208/peugeot_208_1.2_puretech_active_pack_eat8-19355043#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                                       
 [36] "https://www.hasznaltauto.hu/szemelyauto/peugeot/208/peugeot_208_1.2_puretech_active_pack_eat8-19355043#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                                       
 [37] NA                                                                                                                                                                                                                                                      
 [38] "https://www.hasznaltauto.hu/szemelyauto/peugeot/rifter/peugeot_rifter_e-rifter_50kwh_active_pack_kizarolag_gyartasrendelesbol-19355087#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                       
 [39] "https://www.hasznaltauto.hu/szemelyauto/peugeot/rifter/peugeot_rifter_e-rifter_50kwh_active_pack_kizarolag_gyartasrendelesbol-19355087#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                       
 [40] NA                                                                                                                                                                                                                                                      
 [41] "https://www.hasznaltauto.hu/szemelyauto/ssangyong/rexton/ssangyong_rexton_2.2_e-xdi_premium_4wd_automata_7_szemelyes_tesztauto-19368594#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                      
 [42] "https://www.hasznaltauto.hu/szemelyauto/ssangyong/rexton/ssangyong_rexton_2.2_e-xdi_premium_4wd_automata_7_szemelyes_tesztauto-19368594#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                      
 [43] NA                                                                                                                                                                                                                                                      
 [44] "https://www.hasznaltauto.hu/szemelyauto/opel/corsa_f/opel_corsa_f_1.2_edition_akcios_modell_kimagaslo_kedvezmennyel-19396681#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                 
 [45] "https://www.hasznaltauto.hu/szemelyauto/opel/corsa_f/opel_corsa_f_1.2_edition_akcios_modell_kimagaslo_kedvezmennyel-19396681#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                 
 [46] NA                                                                                                                                                                                                                                                      
 [47] "https://www.hasznaltauto.hu/szemelyauto/kia/ceed/kia_ceed_ceed_1.0_t-gdi_silver_magyar_szervizkonyv_kamera_afas-19462882#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                     
 [48] "https://www.hasznaltauto.hu/szemelyauto/kia/ceed/kia_ceed_ceed_1.0_t-gdi_silver_magyar_szervizkonyv_kamera_afas-19462882#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                     
 [49] NA                                                                                                                                                                                                                                                      
 [50] "https://www.hasznaltauto.hu/szemelyauto/opel/crossland/opel_crossland_1.2_t_edition_kiemelt_akcios_modell-19469653#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                           
 [51] "https://www.hasznaltauto.hu/szemelyauto/opel/crossland/opel_crossland_1.2_t_edition_kiemelt_akcios_modell-19469653#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                           
 [52] NA                                                                                                                                                                                                                                                      
 [53] "https://www.hasznaltauto.hu/szemelyauto/ssangyong/korando/ssangyong_korando_1.5_turbo_gdi_clever_kulonbozo_felszereltsegek_szinek_azonnal_raktarrol-19665635#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                 
 [54] "https://www.hasznaltauto.hu/szemelyauto/ssangyong/korando/ssangyong_korando_1.5_turbo_gdi_clever_kulonbozo_felszereltsegek_szinek_azonnal_raktarrol-19665635#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                 
 [55] NA                                                                                                                                                                                                                                                      
 [56] "https://www.hasznaltauto.hu/szemelyauto/hyundai/tucson/hyundai_tucson_1.6_t-gdi_hybrid_executive_plus_automata_keszletrol_azonnal_230le_hybrid-19698246#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                      
 [57] "https://www.hasznaltauto.hu/szemelyauto/hyundai/tucson/hyundai_tucson_1.6_t-gdi_hybrid_executive_plus_automata_keszletrol_azonnal_230le_hybrid-19698246#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                      
 [58] NA                                                                                                                                                                                                                                                      
 [59] "https://www.hasznaltauto.hu/szemelyauto/mercedes-benz/c_220/mercedes-benz_c_220_t_cdi_blueefficiency_avantgarde_amg_lineharmankardongyonyoru_allapot-19701156#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                
 [60] "https://www.hasznaltauto.hu/szemelyauto/mercedes-benz/c_220/mercedes-benz_c_220_t_cdi_blueefficiency_avantgarde_amg_lineharmankardongyonyoru_allapot-19701156#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                
 [61] NA                                                                                                                                                                                                                                                      
 [62] "https://www.hasznaltauto.hu/szemelyauto/opel/mokka/opel_mokka_1.2_t_edition_kiemelt_akcios_modell_utolerhetetlen_aronegyedi_lizingakcio-19816005#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                             
 [63] "https://www.hasznaltauto.hu/szemelyauto/opel/mokka/opel_mokka_1.2_t_edition_kiemelt_akcios_modell_utolerhetetlen_aronegyedi_lizingakcio-19816005#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                             
 [64] NA                                                                                                                                                                                                                                                      
 [65] "https://www.hasznaltauto.hu/szemelyauto/peugeot/408/peugeot_408_1.2_puretech_allure_pack_eat8_tesztauto_2024_februari_atvetellel-19822407#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                    
 [66] "https://www.hasznaltauto.hu/szemelyauto/peugeot/408/peugeot_408_1.2_puretech_allure_pack_eat8_tesztauto_2024_februari_atvetellel-19822407#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                    
 [67] NA                                                                                                                                                                                                                                                      
 [68] "https://www.hasznaltauto.hu/szemelyauto/ssangyong/tivoli/ssangyong_tivoli_1.5_gdi-t_style_uj_forma_bevalt_tartalom_rendelje_meg_nalunk_az_uj_tivolit-19839434#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                
 [69] "https://www.hasznaltauto.hu/szemelyauto/ssangyong/tivoli/ssangyong_tivoli_1.5_gdi-t_style_uj_forma_bevalt_tartalom_rendelje_meg_nalunk_az_uj_tivolit-19839434#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                
 [70] NA                                                                                                                                                                                                                                                      
 [71] "https://www.hasznaltauto.hu/szemelyauto/ssangyong/torres/ssangyong_torres_1.5_turbo_gdi_club_megerkezett_az_uj_torres_probalja_ki_es_rendelje_meg_nalunk-19839893#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                            
 [72] "https://www.hasznaltauto.hu/szemelyauto/ssangyong/torres/ssangyong_torres_1.5_turbo_gdi_club_megerkezett_az_uj_torres_probalja_ki_es_rendelje_meg_nalunk-19839893#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                            
 [73] NA                                                                                                                                                                                                                                                      
 [74] "https://www.hasznaltauto.hu/szemelyauto/audi/a6_allroad/audi_a6_allroad_55_tfsi_quattro_s-tronic_egyedi_szin_bangolufsen_hifi-19853292#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                       
 [75] "https://www.hasznaltauto.hu/szemelyauto/audi/a6_allroad/audi_a6_allroad_55_tfsi_quattro_s-tronic_egyedi_szin_bangolufsen_hifi-19853292#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                       
 [76] NA                                                                                                                                                                                                                                                      
 [77] "https://www.hasznaltauto.hu/szemelyauto/mazda/cx-5/mazda_cx-5_2.5i_e-skyactiv_homura_awd_automata_navi_markakereskedesbol-19887851#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                           
 [78] "https://www.hasznaltauto.hu/szemelyauto/mazda/cx-5/mazda_cx-5_2.5i_e-skyactiv_homura_awd_automata_navi_markakereskedesbol-19887851#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                           
 [79] NA                                                                                                                                                                                                                                                      
 [80] "https://www.hasznaltauto.hu/szemelyauto/kia/niro/kia_niro_1.6_gdi_hev_silver_dct-19893267#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                                                    
 [81] "https://www.hasznaltauto.hu/szemelyauto/kia/niro/kia_niro_1.6_gdi_hev_silver_dct-19893267#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                                                    
 [82] NA                                                                                                                                                                                                                                                      
 [83] "https://www.hasznaltauto.hu/szemelyauto/kia/xceed/kia_xceed_1.5_t-gdi_x-gold_keszletrol_egyedi_kedvezmennyel-19957055#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                        
 [84] "https://www.hasznaltauto.hu/szemelyauto/kia/xceed/kia_xceed_1.5_t-gdi_x-gold_keszletrol_egyedi_kedvezmennyel-19957055#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                        
 [85] NA                                                                                                                                                                                                                                                      
 [86] "https://www.hasznaltauto.hu/szemelyauto/skoda/superb/skoda_superb_2.0_tdi_scr_style_4x4_dsg_magyarorszagi1tulvegig_vezetett_szervizkonyv-19974031#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                            
 [87] "https://www.hasznaltauto.hu/szemelyauto/skoda/superb/skoda_superb_2.0_tdi_scr_style_4x4_dsg_magyarorszagi1tulvegig_vezetett_szervizkonyv-19974031#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                            
 [88] NA                                                                                                                                                                                                                                                      
 [89] "https://www.hasznaltauto.hu/szemelyauto/skoda/octavia/skoda_octavia_2.0_cr_tdi_elegance_magyarorszagikituno_muszaki_allapotvezetett_szervizkonyv-19995745#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                    
 [90] "https://www.hasznaltauto.hu/szemelyauto/skoda/octavia/skoda_octavia_2.0_cr_tdi_elegance_magyarorszagikituno_muszaki_allapotvezetett_szervizkonyv-19995745#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                    
 [91] NA                                                                                                                                                                                                                                                      
 [92] "https://www.hasznaltauto.hu/szemelyauto/mercedes-benz/c_160/mercedes-benz_c_160_led_fenyszorok_agility_control_futomu_tolatokamera-19486548#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                  
 [93] NA                                                                                                                                                                                                                                                      
 [94] "https://www.hasznaltauto.hu/szemelyauto/mercedes-benz/cla_200/mercedes-benz_cla_200_progressive_7g-dct_magyarorszagi_isp-19997915#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                            
 [95] NA                                                                                                                                                                                                                                                      
 [96] "https://www.hasznaltauto.hu/szemelyauto/mercedes-benz/c_180/mercedes-benz_c_180_9g-tronic_mild_hybrid_drive_ujszeru_afa-s_9.99thm-19677410#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                   
 [97] NA                                                                                                                                                                                                                                                      
 [98] "https://www.hasznaltauto.hu/szemelyauto/mercedes-benz/glc_250/mercedes-benz_glc_250_d_4matic_9g-tronic_1tulajd_vezetett_szervizk_9.99thm-19720733#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                            
 [99] NA                                                                                                                                                                                                                                                      
[100] "https://www.hasznaltauto.hu/szemelyauto/bmw/x4/bmw_x4_xdrive20d_automata_adaptiv_ledmsport_futomuakar_2ev_garanciaval-19812619#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                               
[101] NA                                                                                                                                                                                                                                                      
[102] "https://www.hasznaltauto.hu/szemelyauto/mercedes-benz/a_180/mercedes-benz_a_180_d_amg_line_8g-dct_mo-i_garancialis_isp_2026.05-ig_amg_line_panorama_teto-19473288#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                            
[103] NA                                                                                                                                                                                                                                                      
[104] "https://www.hasznaltauto.hu/szemelyauto/bmw/730/bmw_730d_xdrive_automata_laser_vilagitasbowerswilkinsonheadupdisplaypanorama_tetoakar_2_ev_garanciava-19930412#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                               
[105] NA                                                                                                                                                                                                                                                      
[106] "https://www.hasznaltauto.hu/szemelyauto/mercedes-amg/a-osztaly/mercedes-amg_a-osztaly_amg_a_35_magyar-20000137#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                               
[107] NA                                                                                                                                                                                                                                                      
[108] "https://www.hasznaltauto.hu/szemelyauto/bmw/330/bmw_330e_m_sport_automata-19939643#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                                                                           
[109] NA                                                                                                                                                                                                                                                      
[110] "https://www.hasznaltauto.hu/szemelyauto/mercedes-benz/eqa/mercedes-benz_eqa_250_gyonyoru_allapot_gyari_garancia_9.99thm-19392310#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                             
[111] NA                                                                                                                                                                                                                                                      
[112] "https://www.hasznaltauto.hu/szemelyauto/mercedes-benz/gla_200/mercedes-benz_gla_200_d_progressive_line_8g-dct_afa-s_hosszutavu_berleti_lehetoseg_kedvezo_finanszirozasi_opciok-19336319#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                      
[113] NA                                                                                                                                                                                                                                                      
[114] "https://www.hasznaltauto.hu/szemelyauto/mercedes-benz/s_560/mercedes-benz_s_560_4matic_9g-tronic_afas_garancialis_serulesmentes_allofutes_iwc_schaffhausen_analog_ora-19656611#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                               
[115] NA                                                                                                                                                                                                                                                      
[116] "https://www.hasznaltauto.hu/szemelyauto/mercedes-benz/glc_300/mercedes-benz_glc_300_de_4matic_9g-tronic_plug-in_hybrid_afa-s_hosszutavu_berleti_lehetoseg_kedvezo_eur_alapu_finanszirozasi_lehetoseg-19330101#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"
[117] NA                                                                                                                                                                                                                                                      
[118] "https://www.hasznaltauto.hu/szemelyauto/mercedes-benz/glc_300/mercedes-benz_glc_300_de_4matic_9g-tronic_plug-in_hybrid_afa-s_hosszutavu_berleti_lehetoseg_kedvezo_finanszirozasi_opciok-19486938#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"             
[119] NA                                                                                                                                                                                                                                                      
[120] "https://www.hasznaltauto.hu/szemelyauto/mercedes-benz/gle_350/mercedes-benz_gle_350_de_4matic_9g-tronic_plug-in_hybrid_1tulajd_vezetett_szervizk_9.99thm-19766015#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                            
[121] NA                                                                                                                                                                                                                                                      
[122] "https://www.hasznaltauto.hu/szemelyauto/mercedes-benz/gle_400/mercedes-benz_gle_400_d_4matic_9g-tronic_afa-s_garancialis_integralt_szerviz-csomag_2026.12ho-ig-19357679#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                      
[123] NA                                                                                                                                                                                                                                                      
[124] "https://www.hasznaltauto.hu/szemelyauto/mercedes-benz/s_400/mercedes-benz_s_400_d_l_4matic_9g-tronic_netto_ar_42_511_811_ft-19996855#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                                         
[125] NA                                                                                                                                                                                                                                                      
[126] "https://www.hasznaltauto.hu/szemelyauto/opel/corsa_f/opel_corsa_f_1.2_best_magyarorszagon_elsonek_forgalomba_helyezett_garancialis_gepjarmu-20012929#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                         
[127] NA                                                                                                                                                                                                                                                      
[128] "https://www.hasznaltauto.hu/szemelyauto/skoda/octavia/skoda_octavia_1.0_tsi_ambition_magyarorszagi_87694_km_fenyezesmentes_karosszeria_3_ev_garancia-19849488#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                                
[129] NA                                                                                                                                                                                                                                                      
[130] "https://www.hasznaltauto.hu/szemelyauto/hyundai/i30/hyundai_i30_1.6_t-gdi_vezetett_szervizkonyv_-_panoramateto_-_186le_-_futheto_kormany_-_3_ev_garancia-19942766#sid=651dab01-0dab-4703-bd70-25ee2ea122e5"                                            </code></pre>
</div>
</div>
<p>We’ve now collected the names of all the ads and the url leading to them from the first page. The next step is to collect this data from all pages. However, downloading info from all sites is a lengthy process. <strong>Always try the first few pages first and only download them all if you are sure that your program is running without error.</strong></p>
<p>But how do we download data from multiple pages at once? Let’s see if the url changes when we go to the next page.</p>
<p>If we look at the second page of the results list in the browser, we can see that the link has been expanded with a “/page2” member compared to our previous <code>url</code> address. Continue with “/ page3” on page 3, etc.</p>
<p>This way we can easily generate a vector that contains the links to the first 1, 10, 100, 1000 or even all pages. Lets put these into a data.frame.</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">url_ending</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="st">"/page"</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="va">url_ending</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/page2"  "/page3"  "/page4"  "/page5"  "/page6"  "/page7"  "/page8" 
[8] "/page9"  "/page10"</code></pre>
</div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">url_ending</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="va">url_ending</span><span class="op">)</span> <span class="co"># nothing to add at the first page</span></span>
<span></span>
<span><span class="va">url_ending</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] ""        "/page2"  "/page3"  "/page4"  "/page5"  "/page6"  "/page7" 
 [8] "/page8"  "/page9"  "/page10"</code></pre>
</div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cars_add_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>url <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="va">url</span>, <span class="va">url_ending</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cars_add_df</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 1
   url                                                                          
   &lt;chr&gt;                                                                        
 1 https://www.hasznaltauto.hu/talalatilista/PCOG2VGRR3RDADH4S56ACFGY3UFY652CQ5…
 2 https://www.hasznaltauto.hu/talalatilista/PCOG2VGRR3RDADH4S56ACFGY3UFY652CQ5…
 3 https://www.hasznaltauto.hu/talalatilista/PCOG2VGRR3RDADH4S56ACFGY3UFY652CQ5…
 4 https://www.hasznaltauto.hu/talalatilista/PCOG2VGRR3RDADH4S56ACFGY3UFY652CQ5…
 5 https://www.hasznaltauto.hu/talalatilista/PCOG2VGRR3RDADH4S56ACFGY3UFY652CQ5…
 6 https://www.hasznaltauto.hu/talalatilista/PCOG2VGRR3RDADH4S56ACFGY3UFY652CQ5…
 7 https://www.hasznaltauto.hu/talalatilista/PCOG2VGRR3RDADH4S56ACFGY3UFY652CQ5…
 8 https://www.hasznaltauto.hu/talalatilista/PCOG2VGRR3RDADH4S56ACFGY3UFY652CQ5…
 9 https://www.hasznaltauto.hu/talalatilista/PCOG2VGRR3RDADH4S56ACFGY3UFY652CQ5…
10 https://www.hasznaltauto.hu/talalatilista/PCOG2VGRR3RDADH4S56ACFGY3UFY652CQ5…</code></pre>
</div>
</div>
<p>Taking advantage of the <code>{purr}</code> package, we can load and manipulate entire pages in data frames in a transparent and human-readable (<strong>tidy</strong>) way.</p>
<p>The second example shows that if we specify only one function as the second input, without “~” and “.”, the first input of <code>map</code> will automatically be the first possible input for the specified function, and then the elements added after the function will follow in order. In the present case, we prepared random samples with 1, 2, and 3 elements, where the expected value of the samples is 10, because the first input of the function <code>rnorm</code> is the number of elements (n) and the second is the expected value (mean).</p>
<p>We will now use the <code>map</code> function inside the<code>mutate</code> function, so a list will actually be a column of the original table. The elements of this list will be the web pages that are loaded with the <code>read_html</code> function.</p>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cars_add_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    page <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">url</span>, <span class="va">read_html</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  url                                                                 page      
  &lt;chr&gt;                                                               &lt;list&gt;    
1 https://www.hasznaltauto.hu/talalatilista/PCOG2VGRR3RDADH4S56ACFGY… &lt;xml_dcmn&gt;
2 https://www.hasznaltauto.hu/talalatilista/PCOG2VGRR3RDADH4S56ACFGY… &lt;xml_dcmn&gt;</code></pre>
</div>
</div>
<p>Now let’s insert a <code>nodes</code> column that contains only the required points of the page, and a<code>url_to_cars</code> column, which is the links extracted from it. Since this is already a computationally intensive step, it is worth saving the result. Save it with the same name so your environment won’t be full of unnecessary variables.</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cars_add_df</span> <span class="op">&lt;-</span> <span class="va">cars_add_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    page <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">url</span>, <span class="va">read_html</span><span class="op">)</span>,</span>
<span>    nodes <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">page</span>, <span class="op">~</span> <span class="fu"><a href="https://rvest.tidyverse.org/reference/rename.html">html_nodes</a></span><span class="op">(</span><span class="va">.</span>, <span class="st">".cim-kontener a"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    ad_title <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">nodes</span>, <span class="va">html_text</span><span class="op">)</span>,</span>
<span>    url_to_cars <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">nodes</span>, <span class="va">html_attr</span>, <span class="st">"href"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cars_add_df</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  url                                 page       nodes      ad_title url_to_cars
  &lt;chr&gt;                               &lt;list&gt;     &lt;list&gt;     &lt;list&gt;   &lt;list&gt;     
1 https://www.hasznaltauto.hu/talala… &lt;xml_dcmn&gt; &lt;xml_ndst&gt; &lt;chr&gt;    &lt;chr [130]&gt;
2 https://www.hasznaltauto.hu/talala… &lt;xml_dcmn&gt; &lt;xml_ndst&gt; &lt;chr&gt;    &lt;chr [40]&gt; </code></pre>
</div>
</div>
<p>From now on, all we need is a column with links and titles, but these are nested. The first cell of the <code>url_to_cars</code> column contains more than a hundred links. This nesting option opens a lot of new doors in the process of data manipulation. Use the <code>unnest</code> function to extract these columns.</p>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cars_add_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">url_to_cars</span>, <span class="va">ad_title</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html">unnest</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 170 × 2
   url_to_cars                                                          ad_title
   &lt;chr&gt;                                                                &lt;chr&gt;   
 1 &lt;NA&gt;                                                                 P       
 2 https://www.hasznaltauto.hu/szemelyauto/suzuki/vitara/suzuki_vitara… SUZUKI …
 3 https://www.hasznaltauto.hu/szemelyauto/suzuki/vitara/suzuki_vitara… SUZUKI …
 4 &lt;NA&gt;                                                                 P       
 5 https://www.hasznaltauto.hu/szemelyauto/opel/astra_l/opel_astra_l_1… OPEL AS…
 6 https://www.hasznaltauto.hu/szemelyauto/opel/astra_l/opel_astra_l_1… OPEL AS…
 7 &lt;NA&gt;                                                                 P       
 8 https://www.hasznaltauto.hu/szemelyauto/nissan/x-trail/nissan_x-tra… NISSAN …
 9 https://www.hasznaltauto.hu/szemelyauto/nissan/x-trail/nissan_x-tra… NISSAN …
10 &lt;NA&gt;                                                                 P       
# ℹ 160 more rows</code></pre>
</div>
</div>
<p>We can see that the nodes selection was not entirely perfect (usually not), as there were no matching elements or duplications left.</p>
<p>But now we can still remove the items that don’t fit here. Fortunately, there is no link behind these, and if all columns are the same, <code>unique</code><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> will be our service.</p>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cars_add_df</span> <span class="op">&lt;-</span> <span class="va">cars_add_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">url_to_cars</span>, <span class="va">ad_title</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html">unnest</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html">na.omit</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># remove rows where url_to_cars is missing (NA)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># delete duplications</span></span>
<span></span>
<span><span class="va">cars_add_df</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 70 × 2
   url_to_cars                                                          ad_title
   &lt;chr&gt;                                                                &lt;chr&gt;   
 1 https://www.hasznaltauto.hu/szemelyauto/suzuki/vitara/suzuki_vitara… SUZUKI …
 2 https://www.hasznaltauto.hu/szemelyauto/opel/astra_l/opel_astra_l_1… OPEL AS…
 3 https://www.hasznaltauto.hu/szemelyauto/nissan/x-trail/nissan_x-tra… NISSAN …
 4 https://www.hasznaltauto.hu/szemelyauto/nissan/qashqai/nissan_qashq… NISSAN …
 5 https://www.hasznaltauto.hu/szemelyauto/suzuki/s-cross/suzuki_s-cro… SUZUKI …
 6 https://www.hasznaltauto.hu/szemelyauto/peugeot/5008/peugeot_5008_1… PEUGEOT…
 7 https://www.hasznaltauto.hu/szemelyauto/peugeot/3008/peugeot_3008_1… PEUGEOT…
 8 https://www.hasznaltauto.hu/szemelyauto/mazda/6/mazda_6_sportkombi_… MAZDA 6…
 9 https://www.hasznaltauto.hu/szemelyauto/opel/grandland/opel_grandla… OPEL GR…
10 https://www.hasznaltauto.hu/szemelyauto/kia/sorento/kia_sorento_1.6… KIA SOR…
# ℹ 60 more rows</code></pre>
</div>
</div>
<p>We now have a ready-made list of available cars and their links. Let’s visit one in the browser to see what’s next.</p>
</section><section id="data-from-tables" class="level2"><h2 class="anchored" data-anchor-id="data-from-tables">Data from tables</h2>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/example_car.jpg" class="img-fluid figure-img" width="945"></p>
<figcaption class="figure-caption">A random example of car ad.</figcaption></figure>
</div>
</div>
</div>
<p>You can see that the data is tabulated on the page. This is the best option for us, as you don’t have to search for the item ID on the page one by one (as before with the ad title). You can simply apply the <code>html_table</code> function to a loaded page, which collects all the tables on the it.</p>
<div class="cell">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">car_url</span> <span class="op">&lt;-</span> <span class="st">"https://www.hasznaltauto.hu/szemelyauto/suzuki/vitara/suzuki_vitara_1.4_hybrid_gl_plusz_akar_2.1_millio_ar-elony_plusz_0_thm-18561661#sid=662a20d7-dd8c-4ede-965c-8736e82d6024"</span></span>
<span></span>
<span><span class="va">info_tables</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://xml2.r-lib.org/reference/read_xml.html">read_html</a></span><span class="op">(</span><span class="va">car_url</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rvest.tidyverse.org/reference/html_table.html">html_table</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">info_tables</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
# A tibble: 44 × 2
   `Ár, költségek`                                               `Ár, költségek`
   &lt;chr&gt;                                                         &lt;chr&gt;          
 1 "Vételár:"                                                    "Ár nélkül"    
 2 "Általános adatok"                                            "Általános ada…
 3 "Átvehető:"                                                   "2023."        
 4 "Évjárat:"                                                    "2023"         
 5 "Állapot:"                                                    "Normál"       
 6 "Kivitel:"                                                    "Városi terepj…
 7 "Nemzetközi járműelőélet"                                     "Nemzetközi já…
 8 "Informálódj az alvázszámról a nemzetközi autó-előélet szolg… "Informálódj a…
 9 "Hazai járműelőélet"                                          "Hazai járműel…
10 "Informálódj az alvázszámról a magyarországi autó-előélet sz… "Informálódj a…
# ℹ 34 more rows</code></pre>
</div>
</div>
<p>What is the type of <code>info_tables</code>? Since it collects all the tables it can find from the page, it is a list of data frames.</p>
<p>I will reveal that in some cases we will see that there are multiple tables on a page (certain types of info are taken separately) and we want to avoid an irrelevant single column table causing an error (step 1).</p>
<p>Our goal is to be able to gather all the data about the car into a single two-column table. To join all two column tables (step 3), they must also have the same name (step 2).</p>
<div class="cell">
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">info_tables</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/keep.html">keep</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># keep tables that have 2 columns</span></span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">set_names</span>, <span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># set the names to x and y for each table</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># join the tables to one sinle table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 44 × 2
   x                                                                       y    
   &lt;chr&gt;                                                                   &lt;chr&gt;
 1 "Vételár:"                                                              "Ár …
 2 "Általános adatok"                                                      "Ált…
 3 "Átvehető:"                                                             "202…
 4 "Évjárat:"                                                              "202…
 5 "Állapot:"                                                              "Nor…
 6 "Kivitel:"                                                              "Vár…
 7 "Nemzetközi járműelőélet"                                               "Nem…
 8 "Informálódj az alvázszámról a nemzetközi autó-előélet szolgáltatás ha… "Inf…
 9 "Hazai járműelőélet"                                                    "Haz…
10 "Informálódj az alvázszámról a magyarországi autó-előélet szolgáltatás… "Inf…
# ℹ 34 more rows</code></pre>
</div>
</div>
<p>We see that this works, the output now is one single table. Lets use this method on all the links. To do this, we need to write a function.</p>
<div class="cell">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">get_data</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">url_to_car</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">url_to_car</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="http://xml2.r-lib.org/reference/read_xml.html">read_html</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://rvest.tidyverse.org/reference/html_table.html">html_table</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://purrr.tidyverse.org/reference/keep.html">keep</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html">set_names</a></span><span class="op">(</span><span class="va">.</span>, <span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">get_data</span><span class="op">(</span><span class="va">car_url</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 44 × 2
   x                                                                       y    
   &lt;chr&gt;                                                                   &lt;chr&gt;
 1 "Vételár:"                                                              "Ár …
 2 "Általános adatok"                                                      "Ált…
 3 "Átvehető:"                                                             "202…
 4 "Évjárat:"                                                              "202…
 5 "Állapot:"                                                              "Nor…
 6 "Kivitel:"                                                              "Vár…
 7 "Nemzetközi járműelőélet"                                               "Nem…
 8 "Informálódj az alvázszámról a nemzetközi autó-előélet szolgáltatás ha… "Inf…
 9 "Hazai járműelőélet"                                                    "Haz…
10 "Informálódj az alvázszámról a magyarországi autó-előélet szolgáltatás… "Inf…
# ℹ 34 more rows</code></pre>
</div>
</div>
<p>The resulting table can all be collected in a single column of our table. Each cell will be a table that we all collected from a given link.</p>
<p>This can also take a serious amount of time if we want to retrieve data from hundreds of cars at once. You should always use only a few. Use the <code>sample_n</code> function to randomly select a few lines to test if everything works as expected.</p>
<div class="cell">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cars_add_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># remove this line at the end if everything is fine</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">url_to_cars</span>, <span class="va">get_data</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  url_to_cars                                                  ad_title data    
  &lt;chr&gt;                                                        &lt;chr&gt;    &lt;list&gt;  
1 https://www.hasznaltauto.hu/szemelyauto/peugeot/5008/peugeo… PEUGEOT… &lt;tibble&gt;
2 https://www.hasznaltauto.hu/szemelyauto/kia/niro/kia_niro_1… KIA NIR… &lt;tibble&gt;
3 https://www.hasznaltauto.hu/szemelyauto/toyota/auris/toyota… TOYOTA … &lt;tibble&gt;</code></pre>
</div>
</div>
<p>Currently, our small table is also nested in a cell. Expand it!</p>
<div class="cell">
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cars_add_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># remove this line at the end if everything is fine</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">url_to_cars</span>, <span class="va">get_data</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html">unnest</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 107 × 4
   url_to_cars                                              ad_title x     y    
   &lt;chr&gt;                                                    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;
 1 https://www.hasznaltauto.hu/szemelyauto/peugeot/3008/pe… PEUGEOT… "Ala… "9&nbsp;8…
 2 https://www.hasznaltauto.hu/szemelyauto/peugeot/3008/pe… PEUGEOT… "Ext… "11&nbsp;…
 3 https://www.hasznaltauto.hu/szemelyauto/peugeot/3008/pe… PEUGEOT… "Akc… "9&nbsp;8…
 4 https://www.hasznaltauto.hu/szemelyauto/peugeot/3008/pe… PEUGEOT… "Akc… "Érd…
 5 https://www.hasznaltauto.hu/szemelyauto/peugeot/3008/pe… PEUGEOT… "Vét… "€&nbsp;2…
 6 https://www.hasznaltauto.hu/szemelyauto/peugeot/3008/pe… PEUGEOT… "Fin… "Fin…
 7 https://www.hasznaltauto.hu/szemelyauto/peugeot/3008/pe… PEUGEOT… "Ált… "Ált…
 8 https://www.hasznaltauto.hu/szemelyauto/peugeot/3008/pe… PEUGEOT… "Átv… "202…
 9 https://www.hasznaltauto.hu/szemelyauto/peugeot/3008/pe… PEUGEOT… "Fut… "Új …
10 https://www.hasznaltauto.hu/szemelyauto/peugeot/3008/pe… PEUGEOT… "Évj… "202…
# ℹ 97 more rows</code></pre>
</div>
</div>
<p>Now that we have a lot of rows instead of 3, the url in the first row is repeated as many times as the number of rows in the table next to it so far.</p>
<p>Since the x column now has the variable name and the y column has the value of the variable, we need another super useful function we’ve seen before: <code>pivot_wider</code>!</p>
<div class="cell">
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cars_add_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># remove this line at the end if everything is fine</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">url_to_cars</span>, <span class="va">get_data</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html">unnest</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="st">"x"</span>, values_from <span class="op">=</span> <span class="st">"y"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 55
  url_to_cars      ad_title `Alaptípus ára:` `Extrákkal növelt ár:` `Akciós ár:`
  &lt;chr&gt;            &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;                  &lt;chr&gt;       
1 https://www.has… PEUGEOT… 9&nbsp;840&nbsp;000&nbsp;Ft     11&nbsp;700&nbsp;000&nbsp;Ft          9&nbsp;840&nbsp;000&nbsp;Ft
2 https://www.has… MERCEDE… &lt;NA&gt;             &lt;NA&gt;                   &lt;NA&gt;        
3 https://www.has… MERCEDE… &lt;NA&gt;             &lt;NA&gt;                   &lt;NA&gt;        
# ℹ 50 more variables: `Akció feltételei:` &lt;chr&gt;, `Vételár EUR:` &lt;chr&gt;,
#   `Finanszírozás kalkulátor                    \n                \n            \n        \n    \n            \n            HIRDETÉS` &lt;chr&gt;,
#   `Általános adatok` &lt;chr&gt;, `Átvehető:` &lt;chr&gt;, `Futásidő:` &lt;chr&gt;,
#   `Évjárat:` &lt;chr&gt;, `Állapot:` &lt;chr&gt;, `Kivitel:` &lt;chr&gt;,
#   `Nemzetközi járműelőélet` &lt;chr&gt;,
#   `Informálódj az alvázszámról a nemzetközi autó-előélet szolgáltatás használatához!    \n    \n    \n        \n            Előélet lekérdezése` &lt;chr&gt;,
#   `Hazai járműelőélet` &lt;chr&gt;, …</code></pre>
</div>
</div>
<p>The last thing that causes this headache for this task is the special characters used in the Hungarian language. The <a href="https://github.com/sfirke/janitor">janitor</a>, on the other hand, handles this smoothly as well.</p>
<p>We can now download all the cars if we wish!</p>
<div class="cell">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cars_data_df</span> <span class="op">&lt;-</span> <span class="va">cars_add_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">url_to_cars</span>, <span class="va">get_data</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html">unnest</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="st">"x"</span>, values_from <span class="op">=</span> <span class="st">"y"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/janitor/man/clean_names.html">clean_names</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>
<ol>
<li id="fn1"><p>You can also use it on lists and vectors.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
});
</script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">Content <i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i> 2023 by <a href="https://www.marcellgranat.com">Marcell Granát</a> <br> All content licensed under a <i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i> <i class="fa-brands fa-creative-commons-by" aria-label="creative-commons-by"></i> <i class="fa-brands fa-creative-commons-nc" aria-label="creative-commons-nc"></i> <a href="https://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International license (CC BY-NC 4.0)</a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


</body></html>